---
title: "Untitled"
format: html
editor: visual
---

lst_mpls_sf is my temperature data

```{r}
lst_mpls_sf <- st_read("/Users/munkhbatbatsaikhan/Documents/School/Capstone/project files copy/lst_mpls_sf.dbf")

lst_mpls_sf <- st_transform(lst_mpls_sf, st_crs(census_with_covenants))

lst_mpls_sf_with_geoids <- st_join(lst_mpls_sf, census_with_covenants %>% select(GEOID))

#integrating with my final dataset now

lst_final <- final%>%
  left_join(lst_mpls_sf_with_geoids%>% st_drop_geometry()%>% rename(surface_temperature=ls2022_), by="GEOID")

# Aggregate LST to Census Tract Level
lst <- lst_final %>%
  group_by(GEOID) %>%
  summarize(
    tree_canopy_area = first(tree_canopy_area),
    air_pollution = first(air_pollution),
    svi_index = first(svi_index),
    holc_grade = first(holc_grade),
    has_covenant = first(has_covenant),
    mean_lst = mean(surface_temperature, na.rm = TRUE)
  ) %>%
  ungroup()


```
